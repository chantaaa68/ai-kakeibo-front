<!-- 共通ヘッダー -->
<app-header></app-header>

<div class="categories-container">
  <!-- メインコンテンツ -->
  <div class="categories-content container">
    <div *ngIf="isLoading" class="loading-state">
      <p>読み込み中...</p>
    </div>

    <div *ngIf="!isLoading">
      <!-- ページヘッダー -->
      <div class="page-header">
        <h2>カテゴリ管理</h2>
        <button class="btn btn-primary" (click)="navigateToRegister()">
          <mat-icon>add</mat-icon>
          新規作成
        </button>
      </div>

      <!-- タイプ切り替えボタン -->
      <div class="type-switcher">
        <button
          class="btn"
          [class.btn-primary]="selectedType === TransactionType.EXPENSE"
          [class.btn-outline]="selectedType !== TransactionType.EXPENSE"
          (click)="changeType(TransactionType.EXPENSE)">
          支出カテゴリ
        </button>
        <button
          class="btn"
          [class.btn-primary]="selectedType === TransactionType.INCOME"
          [class.btn-outline]="selectedType !== TransactionType.INCOME"
          (click)="changeType(TransactionType.INCOME)">
          収入カテゴリ
        </button>
      </div>

      <!-- カテゴリグリッド -->
      <div class="categories-grid">
        <app-category-item
          *ngFor="let category of displayedCategories"
          [category]="category">
        </app-category-item>
      </div>

      <!-- 空の状態 -->
      <div *ngIf="displayedCategories.length === 0" class="empty-state">
        <mat-icon class="empty-icon">category</mat-icon>
        <p>{{ selectedType === TransactionType.EXPENSE ? '支出' : '収入' }}カテゴリがまだありません</p>
        <button class="btn btn-primary" (click)="navigateToRegister()">
          最初のカテゴリを作成
        </button>
      </div>
    </div>
  </div>
</div>
